import{r as x,a as T,o as U,w as q,b as z,c as r,d as c,e as o,f as d,u as l,g as b,F as f,h as g,i as M,v as $,j as W,W as G,n as p,t as k}from"./index-3924c5e7.js";import{s as H,f as N,S as C,u as J,P as K,C as P,N as Q,A as X}from"./dataValidation-6d1db4c4.js";const Y={id:"TransPage",class:"py-3 sm:px-12 sm:py-7 container border border-none"},Z={class:"grid grid-cols-1 gap-x-12 gap-y-6 sm:grid-cols-2"},ee={class:"grid grid-cols-4 sm:grid-cols-5 gap-3 mx-auto sm:mt-9 w-full"},te={class:"col-span-3 sm:col-span-3"},se={class:"col-span-1 sm:col-span-none"},oe={for:"Message",class:"font-semibold mb-2 text-left block dark:text-white"},le={class:"shadow-sm rounded-md border dark:border-none w-full"},ne={class:"grid grid-cols-2 sm:grid-cols-3 bg-slate-100 dark:bg-neutral-700 rounded-md"},ae=["onClick"],re={for:"Detail",class:"font-semibold mb-2 text-left block dark:text-white"},ce={for:"Amount",class:"font-semibold mb-2 text-left block dark:text-white"},ie={key:0,class:"text-right text-red-300"},de=o("div",{class:"sm:col-span-2"},[o("hr")],-1),ue={class:""},me={for:"Message",class:"font-semibold mb-2 text-left block dark:text-white"},be={class:"shadow-sm rounded-md border dark:border-none w-full"},fe={class:"grid grid-cols-2 sm:grid-cols-4 SelTransOutAcc bg-teal-400"},ge=["onMouseover"],pe={class:"grid grid-cols-2 sm:grid-cols-3 bg-slate-100 dark:bg-neutral-700 rounded-b-md SelAcc"},ke=["onClick"],he={class:"TransIn"},_e={for:"Message",class:"font-semibold mb-2 text-left block dark:text-white"},xe={class:"shadow-sm rounded-md border dark:border-none w-full"},ve={class:"grid grid-cols-2 sm:grid-cols-4 SelTransInAcc bg-teal-400"},ye=["onMouseover"],we={class:"grid grid-cols-2 sm:grid-cols-3 bg-slate-100 dark:bg-neutral-700 rounded-b-md SelAcc"},Ae=["onClick"],Oe={class:"sm:col-span-2"},Te={for:"Message",class:"font-semibold mb-2 text-left block dark:text-white"},Ce={class:"shadow-sm rounded-md border dark:border-none w-full"},Ie={class:"grid grid-cols-2 sm:grid-cols-6 bg-slate-100 dark:bg-neutral-700 rounded-md"},Se=["onClick"],De={class:"mt-10 mx-auto grid grid-cols-2 gap-3 sm:block"},Ne={__name:"TransferPage",setup(je,{emit:h}){const y=t=>{v.push(...t[0].TransCategories),u.push(...t[1].PayAccounts),m.push(...t[1].PayAccounts),w.push(...t[2].PayMents),A.value=Object.values(u[0])[0],O.value=Object.values(m[0])[0],s.OutAccount=Object.keys(u[0])[0],s.InAccount=Object.keys(m[0])[0],s.Cg=v[0]};(async()=>{try{h("loading",!0),H("Trans")||await N("get","Trans",y)}catch(t){C.fire({title:"ERROR",text:t.message,icon:"error"}),console.error(t)}h("loading",!1)})();const v=x([]),u=x([]),m=x([]),w=x([]);let A=T(""),O=T(""),I=T(!1),s=x({Type:"轉帳",OutAccount:"",OutAcc:"",InAccount:"",InAcc:"",Cg:"",Date:new Date,Amount:"",Detail:"",Transment:""});U(async()=>{await J("Trans",y)});const L=async()=>{try{h("loading",!0),[v,u,m,w].forEach(t=>t.splice(0,t.length)),localStorage.removeItem("Trans"),await N("get","Trans",y)}catch(t){C.fire({title:"ERROR",text:t.message,icon:"error"}),console.error(t)}h("loading",!1)},R=t=>{A.value=Object.values(t)[0],s.OutAccount=Object.keys(t)[0]},V=t=>{O.value=Object.values(t)[0],s.InAccount=Object.keys(t)[0]},E=t=>{S(u,s.OutAccount,".SelTransOutAcc"),s.OutAcc=t},B=t=>{S(m,s.InAccount,".SelTransInAcc"),s.InAcc=t},S=(t,n,a)=>{const e=t.find(_=>_[n]),i=Object.keys(e)[0],D=Array.from(document.querySelectorAll(a+" li"));D.forEach(_=>_.classList.remove("bg-teal-100"));const j=D.find(_=>_.innerText.includes(i));j.classList.remove("bg-teal-400"),j.classList.add("bg-teal-100")},F=t=>{for(const a of Object.keys(s))if((a==="Cg"||a==="Amount")&&!s[a]&&t.Trans!==""){C.fire({title:"資料未輸入完整!",icon:"warning",showConfirmButton:!1});return}const n=new FormData;for(const a in t)n.append(a,t[a]);K(n,h,"轉帳",s,P)};return q(()=>s.Amount,t=>{t=t.replaceAll(",",""),s.Amount=Q(t),I.value=X(t)}),(t,n)=>{const a=z("font-awesome-icon");return r(),c("div",Y,[o("div",Z,[o("div",ee,[o("div",te,[d(l(G),{modelValue:l(s).Date,"onUpdate:modelValue":n[0]||(n[0]=e=>l(s).Date=e),"enable-time-picker":!1,locale:"zh-tw","six-weeks":"center",required:"","text-input":"","auto-apply":"",dark:"","week-start":"0"},null,8,["modelValue"])]),o("div",se,[o("button",{class:"rounded-md bg-teal-400 px-3 sm:px-5 py-2.5 text-center text-sm shadow-sm hover:bg-teal-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-teal-400",onClick:n[1]||(n[1]=e=>L())},"重整")])]),o("div",null,[o("label",oe,[d(a,{icon:["fas","chart-pie"]}),b(" 類別")]),o("div",le,[o("ul",ne,[(r(!0),c(f,null,g(v,e=>(r(),c("li",{key:e,class:p({"text-left px-1 py-1 cursor-pointer":!0,"bg-teal-100 dark:text-blcok":l(s).Cg===e,"dark:text-white":l(s).Cg!==e}),onClick:i=>l(s).Cg=e},k(e),11,ae))),128))])])]),o("div",null,[o("label",re,[d(a,{icon:["fas","align-left"]}),b(" 明細")]),M(o("input",{type:"text",id:"Detail","onUpdate:modelValue":n[2]||(n[2]=e=>l(s).Detail=e),class:"shadow-sm rounded-md border dark:border-none px-1 py-1 w-full text-left bg-slate-100 dark:text-white dark:bg-neutral-700"},null,512),[[$,l(s).Detail]])]),o("div",null,[o("label",ce,[d(a,{icon:["fas","dollar-sign"]}),b(" 金額")]),M(o("input",{type:"text",id:"Amount","onUpdate:modelValue":n[3]||(n[3]=e=>l(s).Amount=e),class:"px-1 py-1 w-full text-left outline-none font-bold bg-slate-100 dark:text-white dark:bg-neutral-700 shadow-sm rounded-md"},null,512),[[$,l(s).Amount]]),l(I)?(r(),c("h5",ie,"* 只能輸入數字")):W("",!0)]),de,o("div",ue,[o("label",me,[d(a,{icon:["fas","arrow-trend-up"]}),b(" 轉出帳戶")]),o("div",be,[o("ul",fe,[(r(!0),c(f,null,g(u,e=>(r(),c("li",{key:e,class:p({"px-1 py-1":!0,"bg-white":l(s).OutAccount===e}),onMouseover:i=>R(e)},k(Object.keys(e)[0]),43,ge))),128))]),o("ul",pe,[(r(!0),c(f,null,g(l(A),e=>(r(),c("li",{key:e,class:p({"text-left px-1 py-1 cursor-pointer":!0,"bg-teal-100 dark:text-block":l(s).OutAcc===e,"dark:text-white":l(s).OutAcc!==e}),onClick:i=>E(e)},k(e),11,ke))),128))])])]),o("div",he,[o("label",_e,[d(a,{icon:["fas","arrow-trend-down"]}),b(" 轉入帳戶")]),o("div",xe,[o("ul",ve,[(r(!0),c(f,null,g(m,e=>(r(),c("li",{key:e,class:p({"px-1 py-1":!0,"bg-white":l(s).InAccount===e}),onMouseover:i=>V(e)},k(Object.keys(e)[0]),43,ye))),128))]),o("ul",we,[(r(!0),c(f,null,g(l(O),e=>(r(),c("li",{key:e,class:p({"text-left px-1 py-1 cursor-pointer":!0,"bg-teal-100 dark:text-block":l(s).InAcc===e,"dark:text-white":l(s).InAcc!==e}),onClick:i=>B(e)},k(e),11,Ae))),128))])])]),o("div",Oe,[o("label",Te,[d(a,{icon:["fas","money-bill-transfer"]}),b(" 經手")]),o("div",Ce,[o("ul",Ie,[(r(!0),c(f,null,g(w,e=>(r(),c("li",{key:e,class:p({"text-left px-1 py-1 cursor-pointer":!0,"bg-teal-100 dark:text-blcok":l(s).Transment===e,"dark:text-white":l(s).Transment!==e}),onClick:i=>l(s).Transment=e},k(e),11,Se))),128))])])])]),o("div",De,[o("button",{class:"rounded-md bg-teal-400 px-3 sm:px-12 py-2.5 text-center text-sm shadow-sm hover:bg-teal-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-teal-400 sm:mr-5",onClick:n[4]||(n[4]=e=>F(l(s)))},"送出"),o("button",{class:"rounded-md bg-teal-400 px-3 sm:px-12 py-2.5 text-center text-sm shadow-sm hover:bg-teal-500 fous-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-teal-400",onClick:n[5]||(n[5]=e=>l(P)(l(s),"轉帳"))},"清除")])])}}};export{Ne as default};
